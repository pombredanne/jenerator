#!/usr/bin/env python3

import sys, argparse
import jenerator


if __name__ == '__main__':
    parser = argparse.ArgumentParser(description='A static site generator')
    subparsers = parser.add_subparsers(description='Valid subcommands')
    # Init command
    parser_init = subparsers.add_parser('init', aliases=['i'],
            help='Initialize a new site directory structure (optional)')
    parser_init.add_argument('--location', '-l', type=str, default='.',
            help='Path to site root directory')
    parser_init.set_defaults(func=jenerator.cmd_init)
    # Build command
    parser_build = subparsers.add_parser('build', aliases=['b'],
            help='Build a site')
    parser_build.add_argument('--source', '-s', type=str, default='.',
            help='Path to site source files')
    parser_build.add_argument('--target', '-t', type=str, default='_build',
            help='Directory to store output files')
    parser_build.add_argument('--overwrite', action='store_true', default=False,
            help='Delete the build target directory before building')
    parser_build.add_argument('--nostatic', action='store_true', default=False,
            help='Do not require a static files directory')
    parser_build.set_defaults(func=jenerator.cmd_build)

    opts = parser.parse_args(sys.argv[1:])
    opts.func(opts)
